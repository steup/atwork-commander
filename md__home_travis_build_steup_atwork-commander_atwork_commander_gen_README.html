<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>atwork-commander: atwork\_commander\_gen</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">atwork-commander
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   <div id="projectbrief">Complete reimplementation of the old Referee Box (Refbox) for the @Work-League of RoboCup.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md__home_travis_build_steup_atwork-commander_atwork_commander_gen_README.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">atwork </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Enable dynamic task generation according to specified task types of the <a href="https://github.com/robocup-at-work/rulebook">RuleBook</a>.</p>
<h2>Architecture</h2>
<p>TaskGenerator with pluggable generators and configuration infrastructure.</p>
<p>The <code>TaskGenerator</code> class if the interface to embed the functionality in other programs. The class uses ros-parameters to extract configuration information including the Arena and Tasks-Specification as well as the genrator plugin to be used.</p>
<p>The generator plugins are implemented using ROS pluginlib. The implementation currently uses pluginlib, logging and the parameter-server API of ROS.</p>
<p>The <code>TaskGenerator</code> is no ROS-Node, but a library to be used in other ROS-Nodes like the refbox state-machine from the <code>atwork_commander_core</code>.</p>
<p><b>TODO</b>: Insert Overview-Image</p>
<h2>Generators</h2>
<p>There are currently two generators implemented:</p>
<ul>
<li><code>Simple</code>:<ul>
<li>Simple task generator to be used as basis for own creations</li>
<li><b>Not Rule-Book compatible</b></li>
</ul>
</li>
<li><code>JurekGen</code>:<ul>
<li>Generator created by <em>Jurek Rostalsky</em> from the <em>robOTTO</em> Team with additional integration code</li>
<li><b>Rule-Book compatible</b></li>
<li>Because of additional integration code currenlty messed up software architecture</li>
<li>Hardly maintanable</li>
</ul>
</li>
</ul>
<p>Generators can be selected through the launch parameter <code>generator</code> in </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;## Configuration</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;Uses simple ROS parameter-based specification of the task types and the arena, which is used to generate task</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;instances accordingly. The general approach is to specify the configuration using ```.yaml``` files, which are either</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;manually loaded using ```rosparam load``` or automatically loaded within ```.launch``` files.</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;### Arena Configuration</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;The arena, where the task are executed in, is specified as a hierarchical parameter in the parameter</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;server. The name of the this parameter is passed on ```TaskGenerator``` construction through the ```arenaConfi</div></div><!-- fragment --><p> parameter. The arena parameter contains the following sub-parts.</p>
<p>By default the parameter <code>arena</code> is used to read the arena specification from in the launch files </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;An example arena configuration can be found in ```atwork_commander_gen/config/example-arena.yam</div></div><!-- fragment --><h4>Workstations</h4>
<p>The <code>workstations</code> sub-parameter contains individual key-value pairs of workstation names and the according workstation type <code>&lt;ws-name&gt;: "\&lt;ws-type\&gt;"</code>. An example Workstation specification looks like this:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;workstations:</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    WS01: &quot;10&quot;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    WS02: &quot;15&quot;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    WS03: &quot;05&quot;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    WS04: &quot;00&quot;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;    WS06: &quot;15&quot;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;    WS08: &quot;05&quot;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    PP01: &quot;PP&quot;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    TT01: &quot;TT&quot;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    SH02: &quot;SH&quot;</div></div><!-- fragment --><p><b>TODO</b>: This will be extended in the future to also include pose information of the workstations for rendering purposes</p>
<p>Currently the following workstation types are implemented:</p>
<p>Type | Description -------&mdash;|----------&mdash; </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;{00```}</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;```05```  |  5cm height Workstation</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;```10```  | 10cm height Workstation (default)</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;```15```  | 15cm height Workstaton</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;```PP```  | Precision Placement Workstation (10cm by default)</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;```TT```  | Rotating Table or Conveyor Belt (10cm height by default)</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;```CBT``` | Rotating Table or Conveyor Belt (10cm height by default)</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;#### Cavities</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;Available cavities in the arena are specified as a list of cavity names e.g.: </div></div><!-- fragment --><p> cavities: [ "F20_20_H", "S40_40_H", "S40_40_V", "M20_H", "M20_V", "M30_H", "M30_V", "M20_100_H", "R20_H", "R20_V" </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;Each cavitiy description consists of the form part e.g. ```F20_20``` for small aluminium profile and a specifier for</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;the orientation. The orientation may either be ```_H``` for horizontal placement or ```_V``` for vertical placement.</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;The reference face for this  placement is always the face with the largest area.</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;The task generation will only generate tasks wich use one of these cavities (__TODO__: Not yet implemented for JurekGen) </div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;#### Objects</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;The object specification describes the available objects of each type for tasks executed in the arena. It contains</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;key-value pairs of ```&lt;object-type&gt;: &lt;count&gt;``` entries in the sub-parameter ```objects```.</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;The idea is to enable the task generator to only use up as many objects of each type as available </div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;(__TODO__: not yet implemented for JurekGen)</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;Example object specification:</div></div><!-- fragment --><p> objects: F20_20_G : 1 F20_20_B : 1 S40_40_B : 1 S40_40_G : 1 M20 : 1 M30 : 1 M20_100 : 1 R20 : 1 AXIS : 1 BEARING : 1 BEARING_BOX : 1 DISTANCE_TUBE : 1 MOTOR : 1 CONTAINER_RED : 1 CONTAINER_BLUE: 1 ```</p>
<h3>Task Configuration</h3>
<p>Task configuration consists of multiple sub-specifications indicating different aspects of the task. The different configuration options will be sorted based on their data type.</p>
<p>All configurations options are sub-parameters of a task. Each task uses the task name as thesub-parameter name. The <code>TaskGenerator</code>'s second options taskConfig describes the parameter, which contains the individual task types as sub-parameters. Typically this parameter is <code>tasks</code>.</p>
<p>The possible sub-parameters of each task have a default parameter, which is used if the parameter is not specified. If parameters are specified that are unknown to the config parser a warning will be printed, but no error is raised.</p>
<p>The default values are specified in <code><a class="el" href="ConfigParserInterface_8h.html">atwork_commander_gen/include/atwork_commander_gen/ConfigParserInterface.h</a></code></p>
<h4>Integer Configurations</h4>
<p>Most of the configuration parameters of each task are integer variables. Boolean choices are also represented through integer variables. In the following there are all the currently supported integer variables described.</p>
<table class="doxtable">
<tr>
<th>Name </th><th>Range </th><th>Default </th><th>Description  </th></tr>
<tr>
<td>prep_time </td><td>1 - 2147483647 </td><td>1 </td><td>Time in minutes for the preparation phase </td></tr>
<tr>
<td>exec_time </td><td>1 - 2147483647 </td><td>1 </td><td>Time in minutes for the execution phase </td></tr>
<tr>
<td>waypoints </td><td>0 - 2147483647 </td><td>0 </td><td>Number of waypoints to generate (Not implemented for JurekGen) </td></tr>
<tr>
<td>objects </td><td>0 - 2147483647 </td><td>1 </td><td>Number of objects to transport </td></tr>
<tr>
<td>decoys </td><td>0 - 2147483647 </td><td>0 </td><td>Number of decoys to place on workstations </td></tr>
<tr>
<td>barrier_tapes </td><td>0 - 2147483647 </td><td>0 </td><td>Number of barrier tapes to be placed in the arena (Not yet implemented) </td></tr>
<tr>
<td>obstacles </td><td>0 - 2147483647 </td><td>0 </td><td>Number of obstacles to be placed in the arena (Not yet implemented) </td></tr>
<tr>
<td>arbitrary_surfaces </td><td>0 - 2147483647 </td><td>0 </td><td>number of workstations, where objects are picked from, which contain arbitrary surfaces (not yet implemented) </td></tr>
<tr>
<td>tables </td><td>1 - 2147483647 </td><td>0 </td><td>number of workstations to be used in task (not yet implemented for JurekGen) </td></tr>
</table>
<p>tables | pp_placing | 0 - 2147483647 | 0 | Number of objects to be placed on a PPT in the appropriate cavity ref_cavity_position | 0 - 1 | 0 | Boolean if cavity position is decided by referees (Ignored, currently assumed to be always 1) ref_cavity_rotation | 0 - 1 | 0 | Boolean if cavity rotation is decided by referees (Not yet implemented) ref_cavity_orientation | 0 - 1 | 0 | Boolean if cavity orientation is decided by referees (Not implemented in JurekGen) container_placing | 0 - 2147483647 | 0 | How many objects to be placed in containers on workstations tt_grasping | 0 - 2147483647 | 0 | How many objects to be grapsed from RTTs and CBTs tt_placing | 0 - 2147483647 | 0 | How many objects to be placed on RTTs or CBTs shelfes_grasping | 0 - 2147483647 | 0 | How many objects to be grasped from Shelves shelfes_placing | 0 - 2147483647 | 0 | How many objects to be placed on Shelves container_on_shelf | 0 - 1 | 0 | If containers are allowed to be placed on shelfes container_on_tt | 0 - 1 | 0 | If containers are allowed ot be placed on RTTs and CBTs ref_tt_direction | 0 - 1 | 0 | If the direction of the RTT is set by the referees (Not implemented yet)</p>
<h4>String-List Configurations</h4>
<p>Some advanced configurations need lists of strings as values:</p>
<table class="doxtable">
<tr>
<th>Name </th><th>Default </th><th>Description  </th></tr>
<tr>
<td>cavities </td><td>{} </td><td>List of cavities to not be used for this task type </td></tr>
<tr>
<td>normalTableTypes </td><td>{ "00", "05", "10", "15" } </td><td>List of all workstation types, which are allowed to be used in this task type in addition to RTT, CBT, PPT and Shelf </td></tr>
<tr>
<td>allowedTables </td><td>{} </td><td>Explicit list of workstation names to be used in this task. Ignored if empty </td></tr>
</table>
<h4>String Configurations</h4>
<p>Some special configuration parameters have string values:</p>
<table class="doxtable">
<tr>
<th>Name </th><th>Default </th><th>Description  </th></tr>
<tr>
<td>ttTypes </td><td>"TT" </td><td>Name of the workstation type indicating RTTs and CBTs </td></tr>
<tr>
<td>ppTypes </td><td>"PP" </td><td>Name of the workstation type indicating PPTs </td></tr>
<tr>
<td>shTypes </td><td>"SH" </td><td>Name of the workstation type indicating Shelfs </td></tr>
</table>
<h4>String-Integer Map</h4>
<p>Special configuration option to declare the amount of objects to be used of each type of object for this task</p>
<table class="doxtable">
<tr>
<th>Name </th><th>Default </th><th>Description  </th></tr>
<tr>
<td>objects </td><td>{} </td><td>Explicit object count to declare the amount of objects of this type to be used (Not implemented in JurekGen) </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
